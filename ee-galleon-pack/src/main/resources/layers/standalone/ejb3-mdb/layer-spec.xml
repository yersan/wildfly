<?xml version="1.0" ?>
<layer-spec xmlns="urn:jboss:galleon:layer-spec:1.0" name="ejb3">
    <!-- Aggregates EJB3 functionality, excluding ejb-iiop. -->
    <dependencies>
        <layer name="ejb3-lite"/>
        <layer name="jms-activemq"/>
        <layer name="ejb3-remoting" optional="true"/>
    </dependencies>
    <!-- TODO is discovery relevant to ejb3-lite? -->
    <feature spec="subsystem.discovery"/>
    <feature spec="subsystem.ejb3">
        <param name="default-resource-adapter-name" value="${ejb.resource-adapter-name:activemq-ra.rar}"/>
        <param name="default-mdb-instance-pool" value="mdb-strict-max-pool"/>
        <feature spec="subsystem.ejb3.strict-max-bean-instance-pool">
            <param name="strict-max-bean-instance-pool" value="mdb-strict-max-pool"/>
            <param name="derive-size" value="from-cpu-count"/>
            <param name="timeout" value="5"/>
            <param name="timeout-unit" value="MINUTES"/>
        </feature>
    </feature>
</layer-spec>
