<?xml version="1.0" ?>
<layer-spec xmlns="urn:jboss:galleon:layer-spec:1.0" name="ejb3">
    <!-- Aggregates EJB3 functionality, excluding ejb-iiop. -->
    <dependencies>
        <layer name="ejb3-lite"/>
        <layer name="resource-adapters"/>
        <layer name="jms-activemq"/>
    </dependencies>

    <!-- TODO may need to import feature-group for embedded activemq -->

    <feature spec="subsystem.ejb3">
        <param name="default-resource-adapter-name" value="${ejb.resource-adapter-name:activemq-ra.rar}"/>
        <param name="default-mdb-instance-pool" value="mdb-strict-max-pool"/>
        <feature spec="subsystem.ejb3.strict-max-bean-instance-pool">
            <param name="strict-max-bean-instance-pool" value="mdb-strict-max-pool"/>
            <param name="derive-size" value="from-cpu-count"/>
            <param name="timeout" value="5"/>
            <param name="timeout-unit" value="MINUTES"/>
        </feature>
        <feature spec="subsystem.ejb3.service.remote">
            <param name="connectors" value="[http-remoting-connector]"/>
            <param name="thread-pool-name" value="default"/>
            <feature spec="subsystem.ejb3.service.remote.channel-creation-options">
                <param name="channel-creation-options" value="MAX_OUTBOUND_MESSAGES"/>
                <param name="value" value="1234"/>
                <param name="type" value="remoting"/>
            </feature>
        </feature>
    </feature>
</layer-spec>
