<?xml version="1.0" ?>
<layer-spec xmlns="urn:jboss:galleon:layer-spec:1.0" name="ejb3-lite">
    <!-- Aggregates the functionality roughly associated with the EJB Lite concept.
         Note that the timer-service feature provides persistent timers which goes beyond EJB Lite requirements. -->
    <dependencies>
        <layer name="ejb3-stateless"/>
        <layer name="transactions"/>
        <!-- SFSB requires a cache, so we depend on a layer for local infinispan caching.
             Users can exclude this layer and include ejb-stateful-dist-cache to get
             a distributed cache.  But some cache must be configured. -->
        <layer name="ejb-local-cache" optional="true"/>
    </dependencies>
    <feature spec="subsystem.ejb3">
        <param name="default-sfsb-cache" value="simple"/>
        <param name="default-sfsb-passivation-disabled-cache" value="simple"/>
        <param name="default-stateful-bean-access-timeout" value="5000"/>
        <feature spec="subsystem.ejb3.cache">
            <param name="cache" value="simple"/>
        </feature>
        <feature spec="subsystem.ejb3.cache">
            <param name="cache" value="distributable"/>
            <param name="passivation-store" value="infinispan"/>
            <param name="aliases" value="[passivating,clustered]"/>
        </feature>
        <feature spec="subsystem.ejb3.passivation-store">
            <param name="passivation-store" value="infinispan"/>
            <param name="cache-container" value="ejb"/>
            <param name="max-size" value="10000"/>
        </feature>
        <feature spec="subsystem.ejb3.service.async">
            <param name="thread-pool-name" value="default"/>
        </feature>
        <feature spec="subsystem.ejb3.thread-pool">
            <param name="thread-pool" value="default"/>
            <param name="max-threads" value="10"/>
            <feature spec="subsystem.ejb3.thread-pool.keepalive-time">
                <param name="time" value="60"/>
                <param name="unit" value="SECONDS"/>
            </feature>
        </feature>
    </feature>
</layer-spec>
